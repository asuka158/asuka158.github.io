<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>


    <meta name="description" content="DP专题">
<meta property="og:type" content="article">
<meta property="og:title" content="动态规划 DP专题">
<meta property="og:url" content="http://example.com/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/index.html">
<meta property="og:site_name" content="Asuka">
<meta property="og:description" content="DP专题">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/3cdb3679a0b92a4fc930a4f596f244f4.png">
<meta property="og:image" content="http://example.com/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/fec1be900c76fc27ebba3856fc2c5800.png">
<meta property="og:image" content="http://example.com/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/04ed2b3167957b23682734cd95797f40.png">
<meta property="og:image" content="http://example.com/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/7a3686e3beade20946834c6404649677.png">
<meta property="og:image" content="http://example.com/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/049a8879ad8a6ea1d2888b419fc6ba71.png">
<meta property="og:image" content="http://example.com/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/9929d7dd5a9d881a6b21b8fcf8234086.png">
<meta property="og:image" content="http://example.com/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/d95c86d5975a3e0ec598ef27a2134793.png">
<meta property="og:image" content="http://example.com/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/bd0e1dd65163af730781e5276db6b716.png">
<meta property="og:image" content="http://example.com/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/ef24042ff8d79f95c33441ea38633b1d.png">
<meta property="og:image" content="http://example.com/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/b9016152a3b8e80af30493bbb8387399.png">
<meta property="og:image" content="http://example.com/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/1860b73fd3426725a0946cc3522f81de.png">
<meta property="og:image" content="http://example.com/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/c2d6188ffbc768507e9251e378ae3f04.png">
<meta property="og:image" content="http://example.com/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/1362875e966ae3a660c4db1fd525b97a.png">
<meta property="og:image" content="http://example.com/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/f293f52d003256b6804775b3e4413a78.png">
<meta property="og:image" content="http://example.com/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/153a707beb37a2881d003dd640345aa5.png">
<meta property="article:published_time" content="2022-11-28T12:41:24.000Z">
<meta property="article:modified_time" content="2024-07-31T10:31:38.000Z">
<meta property="article:author" content="Asuka">
<meta property="article:tag" content="动态规划DP">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/3cdb3679a0b92a4fc930a4f596f244f4.png">


<link rel="canonical" href="http://example.com/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/","path":"2022/11/28/动态规划-DP专题/","title":"动态规划 DP专题"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>动态规划 DP专题 | Asuka</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Asuka</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">1.</span> <span class="nav-text">
    DP专题
</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E4%BB%A3%E7%A0%81%E6%BA%90%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-Div1-%E8%BF%9E%E7%BB%AD%E5%AD%90%E5%BA%8F%E5%88%97"><span class="nav-number">1.1.</span> <span class="nav-text">1.代码源每日一题 Div1 连续子序列</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2022%E7%89%9B%E5%AE%A2%E5%AF%92%E5%81%87%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E9%9B%86%E8%AE%AD%E8%90%A51-A-%E4%B9%9D%E5%B0%8F%E6%97%B6%E4%B9%9D%E4%B8%AA%E4%BA%BA%E4%B9%9D%E6%89%87%E9%97%A8"><span class="nav-number">1.2.</span> <span class="nav-text">2.2022牛客寒假算法基础集训营1 A 九小时九个人九扇门</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-AtCoder-Beginner-Contest-230-F-dp-%E8%B4%AA%E5%BF%83-%E5%89%8D%E7%BC%80%E5%92%8C"><span class="nav-number">1.3.</span> <span class="nav-text">3.AtCoder Beginner Contest 230 F(dp + 贪心 + 前缀和)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-E-Average-and-Median%EF%BC%88%E4%BA%8C%E5%88%86-DP%EF%BC%89"><span class="nav-number">1.4.</span> <span class="nav-text">4.E - Average and Median（二分+DP）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E4%BB%A3%E7%A0%81%E6%BA%90%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-Div1-%E6%8B%86%E6%96%B9%E5%9D%97-dp-%E6%80%9D%E7%BB%B4"><span class="nav-number">1.5.</span> <span class="nav-text">5.代码源每日一题 Div1 拆方块(dp&#x2F;思维)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-2019-CCPC%E5%93%88%E5%B0%94%E6%BB%A8-I-Interesting-Permutation"><span class="nav-number">1.6.</span> <span class="nav-text">6.2019 CCPC哈尔滨 I. Interesting Permutation</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-daimayuan-671-%E4%BC%98%E7%BE%8E%EF%BC%81%E6%9C%80%E9%95%BF%E4%B8%8A%E5%8D%87%E5%AD%90%E5%BA%8F%E5%88%97-%E5%80%8D%E6%95%B0%E9%81%8D%E5%8E%86"><span class="nav-number">1.7.</span> <span class="nav-text">7. daimayuan 671. 优美！最长上升子序列(倍数遍历)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-daimayuan-709-%E6%9C%80%E5%A4%A7%E6%9D%83%E5%80%BC%E5%88%92%E5%88%86%EF%BC%88%E5%88%86%E7%B1%BB%E8%AE%A8%E8%AE%BA%EF%BC%89"><span class="nav-number">1.8.</span> <span class="nav-text">8.daimayuan 709. 最大权值划分（分类讨论）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-daimayuan741-%E6%9C%80%E9%95%BF%E6%9C%89%E8%B6%A3%E5%AD%90%E5%BA%8F%E5%88%97-%E8%B4%AA%E5%BF%83-dp"><span class="nav-number">1.9.</span> <span class="nav-text">9.daimayuan741 最长有趣子序列(贪心&#x2F;dp)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-Codeforces-Round-785-Div-2-C-Palindrome-Basis%EF%BC%88%E5%AE%8C%E5%85%A8%E8%83%8C%E5%8C%85%EF%BC%89"><span class="nav-number">1.10.</span> <span class="nav-text">10.Codeforces Round #785 (Div. 2) C. Palindrome Basis（完全背包）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-daimayuan-852-%E8%B4%A7%E5%B8%81%E7%B3%BB%E7%BB%9F%EF%BC%88%E5%AE%8C%E5%85%A8%E8%83%8C%E5%8C%85%EF%BC%89"><span class="nav-number">1.11.</span> <span class="nav-text">11.daimayuan 852. 货币系统（完全背包）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-Codeforces-Round-697-Div-3-G-Strange-Beauty%EF%BC%88%E5%80%8D%E6%95%B0%E9%81%8D%E5%8E%86%EF%BC%89"><span class="nav-number">1.12.</span> <span class="nav-text">12.Codeforces Round #697 (Div. 3) G. Strange Beauty（倍数遍历）</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Asuka"
      src="/images/asuka.jpg">
  <p class="site-author-name" itemprop="name">Asuka</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">36</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">48</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/asuka.jpg">
      <meta itemprop="name" content="Asuka">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Asuka">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="动态规划 DP专题 | Asuka">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          动态规划 DP专题
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-11-28 20:41:24" itemprop="dateCreated datePublished" datetime="2022-11-28T20:41:24+08:00">2022-11-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-07-31 18:31:38" itemprop="dateModified" datetime="2024-07-31T18:31:38+08:00">2024-07-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 style="text-align: center;">
    DP专题
</h1>

<span id="more"></span>
<p>跟着<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/537830263">ygg的dp题单</a>刷的dp</p>
<h2 id="1-代码源每日一题-Div1-连续子序列"><a href="#1-代码源每日一题-Div1-连续子序列" class="headerlink" title="1.代码源每日一题 Div1 连续子序列"></a><a target="_blank" rel="noopener" href="http://oj.daimayuan.top/course/10/problem/504">1.代码源每日一题 Div1 连续子序列</a></h2><p><img src="/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/3cdb3679a0b92a4fc930a4f596f244f4.png" alt="img"><br><strong>分析：</strong><br>&emsp;&emsp;dp数组开成map，则状态转移式<code>dp[i] = max(dp[i - 1] + 1, dp[i])</code><br><strong>AC代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int ll</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> io ios::sync_with_stdio(false),cin.tie(0),cout.tie(0)</span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn = <span class="number">2e5</span> + <span class="number">5</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; dp;</span><br><span class="line"><span class="type">int</span> ar[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    io;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) cin &gt;&gt; ar[i];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!dp.<span class="built_in">count</span>(ar[i] - <span class="number">1</span>)) dp[ar[i]] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> dp[ar[i]] = <span class="built_in">max</span>(dp[ar[i]], dp[ar[i] - <span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> mx = <span class="number">0</span>, id;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> [x, y] : dp)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(y &gt; mx)</span><br><span class="line">        &#123;</span><br><span class="line">            mx = y;</span><br><span class="line">            id = x;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; mx &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = id - mx + <span class="number">1</span>; i &lt;= id; ++i) cout &lt;&lt; i &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-2022牛客寒假算法基础集训营1-A-九小时九个人九扇门"><a href="#2-2022牛客寒假算法基础集训营1-A-九小时九个人九扇门" class="headerlink" title="2.2022牛客寒假算法基础集训营1 A 九小时九个人九扇门"></a><a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/23106/A">2.2022牛客寒假算法基础集训营1 A 九小时九个人九扇门</a></h2><p><img src="/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/fec1be900c76fc27ebba3856fc2c5800.png" alt="在这里插入图片描述"><br><img src="/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/04ed2b3167957b23682734cd95797f40.png" alt="img"><br><strong>分析：</strong><br>&emsp;&emsp;<code>z = x + y</code><br>&emsp;&emsp;容易发现：z的数字根 = （x的数字根+y)的数字根<br>&emsp;&emsp;由此，定义<code>dp[i][j](n * 10)</code>表示前i个数字组出j的方案数<br>&emsp;&emsp;状态转移方程：<code>dp[i][calc(j + ar[i])] += dp[i - 1][j]</code><br><strong>AC代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int ll</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> io ios::sync_with_stdio(false),cin.tie(0),cout.tie(0)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn = <span class="number">1e5</span> + <span class="number">5</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">998244353</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> ar[maxn];</span><br><span class="line"><span class="type">int</span> dp[maxn][<span class="number">15</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">calc</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> tmp;</span><br><span class="line">    <span class="keyword">while</span>(x &gt;= <span class="number">10</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        tmp = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(x)</span><br><span class="line">        &#123;</span><br><span class="line">            tmp += x % <span class="number">10</span>;</span><br><span class="line">            x /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        x = tmp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    io;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) cin &gt;&gt; ar[i];</span><br><span class="line"></span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt;= <span class="number">9</span>; ++j) (dp[i][j] += dp[i - <span class="number">1</span>][j]) %= mod;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt;= <span class="number">9</span>; ++j) (dp[i][<span class="built_in">calc</span>(j + ar[i])] += dp[i - <span class="number">1</span>][j]) %= mod;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">9</span>; ++i) cout &lt;&lt; dp[n][i] &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="3-AtCoder-Beginner-Contest-230-F-dp-贪心-前缀和"><a href="#3-AtCoder-Beginner-Contest-230-F-dp-贪心-前缀和" class="headerlink" title="3.AtCoder Beginner Contest 230 F(dp + 贪心 + 前缀和)"></a><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/abc230/tasks/abc230_f">3.AtCoder Beginner Contest 230 F(dp + 贪心 + 前缀和)</a></h2><p><img src="/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/7a3686e3beade20946834c6404649677.png" alt="img"><br><img src="/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/049a8879ad8a6ea1d2888b419fc6ba71.png" alt="img"><br><strong>分析：</strong><br>&emsp;&emsp;<code>dp[i]</code>表示操作前i个数字一共可以产生多少种不同的序列<br>&emsp;&emsp;新增数字ar[i]。<br>&emsp;&emsp;首先，将可以这个数字放在dp[i-1]种序列最后不做操作<br>&emsp;&emsp;其次，可以和dp[i-1]种序列的最后一个元素合并<br>&emsp;&emsp;但是，$dp[i] \neq dp[i - 1] \times 2$<br>&emsp;&emsp;因为会有重复的，我们将序列分为3段。<br>&emsp;&emsp;<code>ar[1~j]</code> <code>ar[j+1~i-1]</code> <code>ar[i]</code><br>&emsp;&emsp;分成三段后，可以发现序列进一步合并的话，可以有两种情况，一是合并<code>ar[1~i-1]</code>,形成序列<code>ar[1~i-1]</code> <code>ar[i]</code>。二是合并<code>ar[j+1~i]</code>,形成序列<code>ar[1~j]</code> <code>ar[j+1~i]</code>。<br>&emsp;&emsp;可以发现，当且仅当<code>sum[j+1~i-1]=0</code>时两个序列是相同的，数量是<code>dp[j]</code>。<br>&emsp;&emsp;因此，只需要找到位置<code>i</code>左边的第一个<code>j</code>满足<code>sum[i-1]-sum[j]=0</code>即可，减去<code>dp[j]</code>。（前面满足条件的j的数量包括在左边第一个里面)。<br><strong>AC代码：</strong> </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int ll</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> io ios::sync_with_stdio(false),cin.tie(0),cout.tie(0)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn = <span class="number">2e5</span> + <span class="number">5</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">998244353</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> ar[maxn];</span><br><span class="line">map&lt;<span class="type">int</span>,<span class="type">int</span>&gt; mp;</span><br><span class="line"><span class="type">int</span> sum[maxn];</span><br><span class="line"><span class="type">int</span> dp[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    io;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) cin &gt;&gt; ar[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) sum[i] = sum[i - <span class="number">1</span>] + ar[i];</span><br><span class="line"></span><br><span class="line">    dp[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        dp[i] = (dp[i - <span class="number">1</span>] * <span class="number">2ll</span>) % mod;</span><br><span class="line">        <span class="keyword">if</span>(mp.<span class="built_in">count</span>(sum[i - <span class="number">1</span>])) dp[i] = ((dp[i] - dp[mp[sum[i - <span class="number">1</span>]]]) % mod + mod) % mod;</span><br><span class="line">        mp[sum[i - <span class="number">1</span>]] = i - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; dp[n] &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="4-E-Average-and-Median（二分-DP）"><a href="#4-E-Average-and-Median（二分-DP）" class="headerlink" title="4.E - Average and Median（二分+DP）"></a><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/abc236/tasks/abc236_e">4.E - Average and Median（二分+DP）</a></h2><p><img src="/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/9929d7dd5a9d881a6b21b8fcf8234086.png" alt="img"><br><strong>分析：</strong><br>&emsp;&emsp;二分平均数和中位数。<br>&emsp;&emsp;对于平均数<code>mid</code>，构造数组<code>br[i] = ar[i] - mid</code>,之后定义<code>dp[i]</code>表示在满足条件下选完区间<code>1~i</code>且选取<code>br[i]</code>的最大值，转移方程<code>dp[i] = max(dp[i - 1], dp[i - 2]) + br[i]</code>。返回<code>max(dp[n], dp[n - 1]) &gt;= 0</code>即可。<br>&emsp;&emsp;对于中位数<code>mid</code>同理，构造数组<code>br[i] = ar[i] &gt;= mid ? i : 0</code>,相同的dp一遍即可。<br><strong>AC代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int ll</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> io ios::sync_with_stdio(false),cin.tie(0),cout.tie(0)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int,int&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn = <span class="number">1e5</span> + <span class="number">5</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">998244353</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">double</span> eps = <span class="number">1e-4</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> ar[maxn];</span><br><span class="line"><span class="type">double</span> br[maxn];</span><br><span class="line"><span class="type">double</span> dp1[maxn];</span><br><span class="line"><span class="type">int</span> dp2[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">judge1</span><span class="params">(<span class="type">double</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) br[i] = (<span class="type">double</span>)ar[i] - x;</span><br><span class="line">    dp1[<span class="number">1</span>] = br[<span class="number">1</span>];</span><br><span class="line">    dp1[<span class="number">2</span>] = <span class="built_in">max</span>(<span class="number">0.0</span>, br[<span class="number">1</span>]) + br[<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">3</span>; i &lt;= n; ++i) dp1[i] = <span class="built_in">max</span>(dp1[i - <span class="number">1</span>], dp1[i - <span class="number">2</span>]) + br[i];</span><br><span class="line">    <span class="keyword">if</span>(dp1[n] &gt;= <span class="number">0</span> || dp1[n - <span class="number">1</span>] &gt;= <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">work1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">double</span> l = <span class="number">0</span>, r = <span class="number">1e9</span>;</span><br><span class="line">    <span class="keyword">while</span>(r - l &gt;= eps)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">double</span> mid = (l + r) / <span class="number">2.0</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">judge1</span>(mid)) l = mid;</span><br><span class="line">        <span class="keyword">else</span> r = mid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; fixed &lt;&lt; <span class="built_in">setprecision</span>(<span class="number">4</span>) &lt;&lt; l &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">judge2</span><span class="params">(<span class="type">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//for(int i = 1; i &lt;= n; ++i) br[i] = (ar[i] &gt;= k ? 1 : -1);</span></span><br><span class="line">    dp2[<span class="number">1</span>] = (ar[<span class="number">1</span>] &gt;= k ? <span class="number">1</span> : <span class="number">-1</span>);</span><br><span class="line">    dp2[<span class="number">2</span>] = <span class="built_in">max</span>(<span class="number">0ll</span>, dp2[<span class="number">1</span>]) + (ar[<span class="number">2</span>] &gt;= k ? <span class="number">1</span> : <span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">3</span>; i &lt;= n; ++i) dp2[i] = <span class="built_in">max</span>(dp2[i - <span class="number">1</span>], dp2[i - <span class="number">2</span>]) + (ar[i] &gt;= k ? <span class="number">1</span> : <span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">if</span>(dp2[n] &gt; <span class="number">0</span> || dp2[n - <span class="number">1</span>] &gt; <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">work2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> l = <span class="number">1</span>, r = (ll)<span class="number">1e9</span>;</span><br><span class="line">    <span class="keyword">while</span>(l &lt;= r)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">judge2</span>(mid)) l = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> r = mid - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; l - <span class="number">1</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    io;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) cin &gt;&gt; ar[i];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">work1</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">work2</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="5-代码源每日一题-Div1-拆方块-dp-思维"><a href="#5-代码源每日一题-Div1-拆方块-dp-思维" class="headerlink" title="5.代码源每日一题 Div1 拆方块(dp/思维)"></a><a target="_blank" rel="noopener" href="http://oj.daimayuan.top/problem/501">5.代码源每日一题 Div1 拆方块(dp/思维)</a></h2><p><img src="/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/d95c86d5975a3e0ec598ef27a2134793.png" alt="img"><br><img src="/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/bd0e1dd65163af730781e5276db6b716.png" alt="img"><br><strong>分析：</strong><br>&emsp;&emsp;对于一列方格被完全删除掉，有三种情况，一是其左侧没有方格后，它会被删掉，我们认为它是被其左侧的方格删除，二是，其右侧没有方格后。三是其左右两侧的方格都足够多，它只能通过它自己一个一个的删除掉，这种情况需要操作<code>h[i]</code>次。<br>&emsp;&emsp;对于第一种情况，我们定义<code>dp1[i]</code>为第i列被其左侧删掉的情况需要操作多少次，转移方程<code>dp1[i] = max(dp1[i - 1] + 1,h[i])</code>。被其右侧删掉同理。<br>&emsp;&emsp;最后<code>ans = max(ans, min(dp1[i], dp2[i]))</code><br><strong>AC代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int ll</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> io ios::sync_with_stdio(false),cin.tie(0),cout.tie(0)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int,int&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn = <span class="number">1e5</span> + <span class="number">5</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">998244353</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">double</span> eps = <span class="number">1e-4</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> ar[maxn];</span><br><span class="line"><span class="type">int</span> dp1[maxn];</span><br><span class="line"><span class="type">int</span> dp2[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    io;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) cin &gt;&gt; ar[i];</span><br><span class="line"></span><br><span class="line">    dp1[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) dp1[i] = <span class="built_in">min</span>(ar[i], dp1[i - <span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">    dp2[n + <span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = n; i &gt; <span class="number">0</span>; --i) dp2[i] = <span class="built_in">min</span>(ar[i], dp2[i + <span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) ans = <span class="built_in">max</span>(ans, <span class="built_in">min</span>(dp1[i], dp2[i]));</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-2019-CCPC哈尔滨-I-Interesting-Permutation"><a href="#6-2019-CCPC哈尔滨-I-Interesting-Permutation" class="headerlink" title="6.2019 CCPC哈尔滨 I. Interesting Permutation"></a><a target="_blank" rel="noopener" href="https://codeforces.com/gym/102394/problem/I">6.2019 CCPC哈尔滨 I. Interesting Permutation</a></h2><p><img src="/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/ef24042ff8d79f95c33441ea38633b1d.png" alt="img"><br><strong>分析：</strong><br>&emsp;&emsp;方法一：<br>&emsp;&emsp;首先，容易发现<code>h[i]</code>需要满足一些条件才会有解。<br>&emsp;&emsp;1.<code>h[0] = 0</code>,<code>h[n] = n - 1</code><br>&emsp;&emsp;2.<code>h[i] &gt;= h[i - 1]</code><br>&emsp;&emsp;3.<code>h[i] &gt;= i - 1</code><br>&emsp;&emsp;之后，我们定义dp[i]表示对于区间<code>1~i</code>可以有多少种不同的数组a，对于状态转移方程，我们考虑两种情况。<br>&emsp;&emsp;1.<code>h[i] = h[i - 1]</code><br>&emsp;&emsp;意思是说添加ar[i]后，h[i]不会发生变化，故<code>g[i] &lt; ar[i] &lt; f[i]</code>，并且是前<code>i-1</code>个数中没有被选过的,这样的数字一共有<code>ar[i - 1] - 1 - (i - 3)</code>个，故此时<code>dp[i] = dp[i - 1] * (ar[i - 1] - 1 - (i - 3))</code><br>&emsp;&emsp;2.<code>h[i] != h[i - 1]</code><br>&emsp;&emsp;<code>cx = h[i] - h[i] - 1</code>,此时应当满足<code>ar[i] = g[i - 1] - cx</code>或者<code>ar[i] = f[i - 1] + cx</code>,所以大体上看<code>dp[i] = dp[i - 1] * 2</code>,但是不然，因为这样看的话ar[i]的取值可能取到小于等于0的数字，或者大于n的数字。我们考虑将这些不符合的减掉。<br>&emsp;&emsp;考虑<code>ar[i]</code>的放置时，前<code>i-1</code>个数字排序方式是不影响的，故我们考虑将选择了相同<code>i-1</code>个数字的数组看成同一种并将他们从小到大排序，之后在分类。<br>&emsp;&emsp;第1种： <code>1, i - 3个数字， h[i - 1] + 1</code><br>&emsp;&emsp;第2种： <code>2, i - 3个数字， h[i - 1] + 2</code><br>&emsp;&emsp;……<br>&emsp;&emsp;第<code>n-h[i - 1]</code>种： <code>n - h[i - 1], i - 3个数字， n</code><br>&emsp;&emsp;容易发现每种ar[i]数组对应的原本数组数量是相同的（dp[i-1]种ar[i]数组中，通过排序变成第1种，第2种，…，第<code>n-h[i-1]</code>种数量是相同的)。<br>&emsp;&emsp;可以发现对于第<code>1~cx</code>种，ar[i]的取值只能是<code>f[i - 1] + cx</code><br>&emsp;&emsp;对于第<code>n-h[i-1]-cx+1~n-h[i-1]</code>种，ar[i]的取值只能是<code>g[i - 1] - cx</code><br>&emsp;&emsp;容易发现，这两者对应的数组种类也是不相交的，即满足<code>n-h[i-1]-cx+1 &gt; cx</code>,故需要将这些减去。<br>&emsp;&emsp;转移方程<code>dp[i] = dp[i - 1] * 2 - dp[i - 1] / (n - h[i - 1]) * 2 * cx</code></p>
<p>&emsp;&emsp;方法二：（<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/486108639">idea from ygg</a>）<br>&emsp;&emsp;整个过程相当于维护一个桶，对于h[i],需要一个大小为<code>h[i]+1</code>的桶<br>&emsp;&emsp;遍历1~n，过程中维护桶的大小siz和答案ans<br>&emsp;&emsp;如果<code>h[i] + 1 &gt; siz</code>则需要将桶的上界或者下界扩大，即<code>ans *= 2</code><br>&emsp;&emsp;否则，则需要向桶里添加数字，剩下的可添加的数字有<code>siz - (i - 1)</code>个，故<code>ans *= siz - (i - 1)</code></p>
<p><strong>AC代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int ll</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> io ios::sync_with_stdio(false),cin.tie(0),cout.tie(0)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int,int&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn = <span class="number">1e5</span> + <span class="number">5</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">double</span> eps = <span class="number">1e-4</span>;</span><br><span class="line"><span class="type">int</span> t, n;</span><br><span class="line"><span class="type">int</span> ar[maxn];</span><br><span class="line"><span class="type">int</span> dp[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">pow_mod</span><span class="params">(ll a, ll n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll ans = <span class="number">1</span>;</span><br><span class="line">    a %= mod;</span><br><span class="line">    <span class="keyword">while</span>(n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(n &amp; <span class="number">1</span>) ans = (ans * a) % mod;</span><br><span class="line">        a = (a * a) % mod;</span><br><span class="line">        n &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">work</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) cin &gt;&gt; ar[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(ar[i] &lt; ar[i - <span class="number">1</span>] || ar[i] &lt; i - <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(ar[<span class="number">1</span>] != <span class="number">0</span> || ar[n] != n - <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dp[<span class="number">1</span>] = n;</span><br><span class="line">    <span class="type">int</span> cx;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        cx = ar[i] - ar[i - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span>(cx) dp[i] = (((<span class="number">2ll</span> * dp[i - <span class="number">1</span>]) % mod - ((<span class="number">2ll</span> * dp[i - <span class="number">1</span>] * cx) % mod * <span class="built_in">pow_mod</span>(n - ar[i - <span class="number">1</span>], mod - <span class="number">2</span>)) % mod) % mod + mod) % mod;</span><br><span class="line">        <span class="keyword">else</span> dp[i] = (dp[i - <span class="number">1</span>] * (ar[i - <span class="number">1</span>] - <span class="number">1</span> - i + <span class="number">3</span>)) % mod;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; dp[n] &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    io;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t--) <span class="built_in">work</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int ll</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> io ios::sync_with_stdio(false),cin.tie(0),cout.tie(0)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int,int&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn = <span class="number">1e5</span> + <span class="number">5</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">double</span> eps = <span class="number">1e-4</span>;</span><br><span class="line"><span class="type">int</span> t, n;</span><br><span class="line"><span class="type">int</span> ar[maxn];</span><br><span class="line"><span class="type">int</span> dp[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">work</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) cin &gt;&gt; ar[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(ar[i] &lt; ar[i - <span class="number">1</span>] || ar[i] &lt; i - <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(ar[<span class="number">1</span>] != <span class="number">0</span> || ar[n] != n - <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dp[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> cx;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        cx = ar[i] - ar[i - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span>(cx) dp[i] = dp[i - <span class="number">1</span>] * <span class="number">2ll</span> % mod;</span><br><span class="line">        <span class="keyword">else</span> dp[i] = (dp[i - <span class="number">1</span>] * (ar[i] + <span class="number">1</span> - i + <span class="number">1</span>)) % mod;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; dp[n] &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    io;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t--) <span class="built_in">work</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="7-daimayuan-671-优美！最长上升子序列-倍数遍历"><a href="#7-daimayuan-671-优美！最长上升子序列-倍数遍历" class="headerlink" title="7. daimayuan 671. 优美！最长上升子序列(倍数遍历)"></a><a target="_blank" rel="noopener" href="http://oj.daimayuan.top/problem/671">7. daimayuan 671. 优美！最长上升子序列(倍数遍历)</a></h2><p><img src="/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/b9016152a3b8e80af30493bbb8387399.png" alt="img"><br><strong>分析：</strong><br>倍数遍历，nlogn，水题<br><strong>AC代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int ll</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> io ios::sync_with_stdio(false),cin.tie(0),cout.tie(0)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int,int&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn = <span class="number">1e6</span> + <span class="number">5</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">double</span> eps = <span class="number">1e-4</span>;</span><br><span class="line"><span class="type">int</span> t, n;</span><br><span class="line"><span class="type">int</span> ar[maxn];</span><br><span class="line"><span class="type">int</span> dp[maxn];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; vt[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">work</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;ar[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n; ++i) dp[i] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> mx = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">2</span> * i; j &lt;= n; j += i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(ar[i] &lt; ar[j]) dp[j] = <span class="built_in">max</span>(dp[j], dp[i] + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) mx = <span class="built_in">max</span>(mx, dp[i]);</span><br><span class="line">    cout &lt;&lt; mx &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    io;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t--) <span class="built_in">work</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="8-daimayuan-709-最大权值划分（分类讨论）"><a href="#8-daimayuan-709-最大权值划分（分类讨论）" class="headerlink" title="8.daimayuan 709. 最大权值划分（分类讨论）"></a><a target="_blank" rel="noopener" href="http://oj.daimayuan.top/problem/709">8.daimayuan 709. 最大权值划分（分类讨论）</a></h2><p><img src="/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/1860b73fd3426725a0946cc3522f81de.png" alt="img"><br><strong>分析：</strong><br>&emsp;&emsp;观察发现，分割之后的每个序列如果内部不单调，那么一定不是最优的。<br>&emsp;&emsp;故可以分别考虑当前这个数在一个递增序列或者在一个递减序列的最大值。<br><strong>AC代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int ll</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> io ios::sync_with_stdio(false),cin.tie(0),cout.tie(0)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int,int&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn = <span class="number">1e6</span> + <span class="number">5</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> ar[maxn];</span><br><span class="line"><span class="type">int</span> dp[<span class="number">3</span>][maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    io;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) cin &gt;&gt; ar[i];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(ar[i] &gt; ar[i - <span class="number">1</span>])</span><br><span class="line">        &#123;</span><br><span class="line">            dp[<span class="number">1</span>][i] = <span class="built_in">max</span>(dp[<span class="number">1</span>][i - <span class="number">1</span>] + ar[i] - ar[i - <span class="number">1</span>], dp[<span class="number">0</span>][i - <span class="number">1</span>]);</span><br><span class="line">            dp[<span class="number">0</span>][i] = <span class="built_in">max</span>(dp[<span class="number">1</span>][i - <span class="number">1</span>], dp[<span class="number">0</span>][i - <span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            dp[<span class="number">1</span>][i] = <span class="built_in">max</span>(dp[<span class="number">1</span>][i - <span class="number">1</span>], dp[<span class="number">0</span>][i - <span class="number">1</span>]);</span><br><span class="line">            dp[<span class="number">0</span>][i] = <span class="built_in">max</span>(dp[<span class="number">0</span>][i - <span class="number">1</span>] + ar[i - <span class="number">1</span>] - ar[i], dp[<span class="number">1</span>][i - <span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="built_in">max</span>(dp[<span class="number">1</span>][n], dp[<span class="number">0</span>][n]) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="9-daimayuan741-最长有趣子序列-贪心-dp"><a href="#9-daimayuan741-最长有趣子序列-贪心-dp" class="headerlink" title="9.daimayuan741 最长有趣子序列(贪心/dp)"></a><a target="_blank" rel="noopener" href="http://oj.daimayuan.top/course/10/problem/741">9.daimayuan741 最长有趣子序列(贪心/dp)</a></h2><p><img src="/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/c2d6188ffbc768507e9251e378ae3f04.png" alt="img"><br><strong>分析：</strong><br>&emsp;&emsp;定义<code>dp[i]</code>为最后一个数字的第i位为1的序列的最长长度。<br>&emsp;&emsp;对于<code>ar[i]</code>,枚举其每一位，假设其第<code>j</code>位是1,则<code>dp[j]++</code>，过程中维护<code>mx=max(mx, dp[j])</code><br>之后将所有的<code>dp[j]</code>赋为<code>mx</code><br><strong>AC代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int ll</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> io ios::sync_with_stdio(false),cin.tie(0),cout.tie(0)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int,int&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn = <span class="number">1e6</span> + <span class="number">5</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> ar[maxn];</span><br><span class="line"><span class="type">int</span> dp[<span class="number">35</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">calc</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> tmp = ar[x], id = <span class="number">0</span>, mx = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(tmp)</span><br><span class="line">    &#123;</span><br><span class="line">        ++id;</span><br><span class="line">        <span class="keyword">if</span>(tmp&amp;<span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            ++dp[id];</span><br><span class="line">            mx = <span class="built_in">max</span>(mx, dp[id]);</span><br><span class="line">        &#125;</span><br><span class="line">        tmp &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    tmp = ar[x];</span><br><span class="line">    id = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(tmp)</span><br><span class="line">    &#123;</span><br><span class="line">        ++id;</span><br><span class="line">        <span class="keyword">if</span>(tmp&amp;<span class="number">1</span>) dp[id] = <span class="built_in">max</span>(dp[id], mx);</span><br><span class="line">        tmp &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    io;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) cin &gt;&gt; ar[i];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) <span class="built_in">calc</span>(i);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> mx = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">32</span>; ++i) mx = <span class="built_in">max</span>(mx, dp[i]);</span><br><span class="line">    cout &lt;&lt; mx &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="10-Codeforces-Round-785-Div-2-C-Palindrome-Basis（完全背包）"><a href="#10-Codeforces-Round-785-Div-2-C-Palindrome-Basis（完全背包）" class="headerlink" title="10.Codeforces Round #785 (Div. 2) C. Palindrome Basis（完全背包）"></a><a target="_blank" rel="noopener" href="https://codeforces.com/contest/1673/problem/C">10.Codeforces Round #785 (Div. 2) C. Palindrome Basis（完全背包）</a></h2><p><strong>题意：</strong><br>给定一个数字<code>n(1&lt;=n&lt;=4e4)</code>,问n可以由多少种不同的回文数的相加表示。<br>对于5<br><img src="/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/1362875e966ae3a660c4db1fd525b97a.png" alt="img"><br><strong>分析：</strong><br>4e4内回文数一共不到500个，预处理处理，之后就是一个完全背包统计方案数的过程<br><strong>AC代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int ll</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> io ios::sync_with_stdio(false),cin.tie(0),cout.tie(0)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int,int&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn = <span class="number">4e4</span> + <span class="number">5</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="type">int</span> t, n;</span><br><span class="line"><span class="type">int</span> ar[maxn];</span><br><span class="line"><span class="type">int</span> dp[maxn];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; vt;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">judge</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> tmp = x, res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(tmp)</span><br><span class="line">    &#123;</span><br><span class="line">        res = res * <span class="number">10</span> + tmp % <span class="number">10</span>;</span><br><span class="line">        tmp /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x == res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= maxn; ++i) <span class="keyword">if</span>(<span class="built_in">judge</span>(i)) vt.<span class="built_in">push_back</span>(i);</span><br><span class="line"></span><br><span class="line">    dp[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; vt.<span class="built_in">size</span>(); ++j)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">4e4</span>; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(i &gt;= vt[j]) (dp[i] += dp[i - vt[j]]) %= mod;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">work</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    cout &lt;&lt; dp[n] &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    io;</span><br><span class="line">    <span class="built_in">init</span>();</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t--) <span class="built_in">work</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="11-daimayuan-852-货币系统（完全背包）"><a href="#11-daimayuan-852-货币系统（完全背包）" class="headerlink" title="11.daimayuan 852. 货币系统（完全背包）"></a><a target="_blank" rel="noopener" href="http://oj.daimayuan.top/problem/852">11.daimayuan 852. 货币系统（完全背包）</a></h2><p><img src="/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/f293f52d003256b6804775b3e4413a78.png" alt="img"><br><strong>分析：</strong><br>&emsp;&emsp;对于小t的付款方式可以通过一个简单的dp1搞出来<br>&emsp;&emsp;对于最优的付款方式也是一个完全背包方案数的问题。<br>&emsp;&emsp;另外，具体要考虑到买多贵的东西，瞎猜的<code>2*ar[n]</code>正确了，据说实际到<code>ar[n] + ar[n - 1]</code>即可。<br><strong>AC代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int ll</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> io ios::sync_with_stdio(false),cin.tie(0),cout.tie(0)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int,int&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn = <span class="number">1e5</span> + <span class="number">5</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="type">int</span> t, n;</span><br><span class="line"><span class="type">int</span> ar[maxn];</span><br><span class="line"><span class="type">int</span> dp1[maxn];</span><br><span class="line"><span class="type">int</span> dp2[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">work</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) cin &gt;&gt; ar[i];</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> pos;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= ar[n] + ar[n - <span class="number">1</span>]; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        dp2[i] = i;</span><br><span class="line">        pos = <span class="built_in">lower_bound</span>(ar + <span class="number">1</span>, ar + n + <span class="number">1</span>, i) - ar;</span><br><span class="line">        <span class="keyword">if</span>(ar[pos] == i) dp1[i] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            --pos;</span><br><span class="line">            dp1[i] = i / ar[pos];</span><br><span class="line">            dp1[i] += dp1[i % ar[pos]];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dp2[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt;= ar[n] + ar[n - <span class="number">1</span>]; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            dp2[j + ar[i]] = <span class="built_in">min</span>(dp2[j + ar[i]], dp2[j] + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= ar[n] + ar[n - <span class="number">1</span>]; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(dp2[i] &lt; dp1[i])</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;No\n&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Yes\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    io;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t--) <span class="built_in">work</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="12-Codeforces-Round-697-Div-3-G-Strange-Beauty（倍数遍历）"><a href="#12-Codeforces-Round-697-Div-3-G-Strange-Beauty（倍数遍历）" class="headerlink" title="12.Codeforces Round #697 (Div. 3) G. Strange Beauty（倍数遍历）"></a><a target="_blank" rel="noopener" href="https://codeforces.com/contest/1475/problem/G">12.Codeforces Round #697 (Div. 3) G. Strange Beauty（倍数遍历）</a></h2><p><img src="/2022/11/28/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-DP%E4%B8%93%E9%A2%98/153a707beb37a2881d003dd640345aa5.png" alt="img"><br><strong>分析：</strong><br><code>dp[i]</code>表示集合中最大的数字是i的情况下，集合最大是多少，倍数遍历转移即可。<br><strong>AC代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int ll</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> io ios::sync_with_stdio(false),cin.tie(0),cout.tie(0)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pii pair<span class="string">&lt;int,int&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn = <span class="number">2e5</span> + <span class="number">5</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="type">int</span> t, n;</span><br><span class="line"><span class="type">int</span> ar[maxn];</span><br><span class="line"><span class="type">int</span> dp[maxn];</span><br><span class="line"><span class="type">int</span> num[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">work</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) cin &gt;&gt; ar[i];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">sort</span>(ar + <span class="number">1</span>, ar + n + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= ar[n]; ++i) dp[i] = num[i] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) ++num[ar[i]];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= ar[n]; ++i) <span class="keyword">if</span>(num[i]) dp[i] = num[i];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= ar[n]; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!num[i]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">2</span> * i; j &lt;= ar[n]; j += i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(!num[j]) <span class="keyword">continue</span>;</span><br><span class="line">            dp[j] = <span class="built_in">max</span>(dp[j], dp[i] + num[j]);</span><br><span class="line">            <span class="comment">//cout &lt;&lt; i &lt;&lt; &#x27; &#x27; &lt;&lt; j &lt;&lt; &#x27; &#x27; &lt;&lt; dp[j] &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> mx = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= ar[n]; ++i) mx = <span class="built_in">max</span>(dp[i], mx);</span><br><span class="line">    cout &lt;&lt; n - mx &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    io;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t--) <span class="built_in">work</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92DP/" rel="tag"># 动态规划DP</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/11/14/Codeforces-Round-833-Div-2/" rel="prev" title="Codeforces Round#833 (Div. 2)">
                  <i class="fa fa-angle-left"></i> Codeforces Round#833 (Div. 2)
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/04/01/leetcode-%E7%83%AD%E9%A2%98-100/" rel="next" title="leetcode 热题 100">
                  leetcode 热题 100 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Asuka</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
